# ファイル選択・カメラ起動 サンプル

## できること
- ボタン押下でファイル選択ダイアログを開く（隠し `input[type=file]`）
- File System Access API の `showOpenFilePicker` を試す（対応ブラウザ限定）
- モバイル向けにカメラを直接開く `capture` 付き `input`
- `getUserMedia` でブラウザ内カメラプレビューを開始・停止
- `getUserMedia` で取得したフレームを Canvas に描画し、回転・色で塗りつぶし加工
- Canvas 上でドラッグした矩形領域だけを半透明色で塗りつぶす（選択塗りつぶし）
- 加工済みキャンバスを API に送る例（FormData でファイル、Base64 を JSON）と PNG ダウンロード

## 使い方
1. `index.html` をブラウザで開く（HTTPS か `http://localhost` が推奨、カメラ系はセキュリティ要件あり）。
2. 各セクションのボタンを押し、要件を満たすか確認してください。

## 実装メモ
- もっとも互換性が高いのは「隠し file input を click で開く」方法。
- `capture` 属性はモバイルブラウザでカメラアプリを開く挙動。PC では通常のファイルピッカーになる。
- `getUserMedia` は HTTPS もしくは `localhost` でのみ動作し、ユーザーの許可が必要。
- `showOpenFilePicker` は Chrome 系の新しめブラウザ限定。複数選択やディレクトリ選択など柔軟だが、互換性要確認。
- Canvas での加工例として 90°刻み回転と指定色の半透明塗りつぶしを実装。必要に応じてフィルターやトリミングも追加可能。

## 動作確認のポイント
- PC: 1 と 4 が基本。2 は対応ブラウザのみ。3 は通常ファイルピッカー動作。5 で静止画取得と加工可。6 で送信サンプルを実行。
- スマホ: 1 でフォトライブラリ/ファイル、3 でカメラ起動、4 でブラウザ内プレビュー（許可ダイアログに同意）。5 で静止画加工が可能。選択塗りつぶしは指でドラッグして範囲指定。6 で送信サンプルを実行。
